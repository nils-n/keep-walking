{% extends "base.html" %}

{% load widget_tweaks %}

{% block title %}Keep on Walking{% endblock %}

{% block content %}

{% if user.is_authenticated %}
  Hi {{ user.username }}!
  <p><a href="{% url 'logout' %}">Log Out</a></p>

	<h2>Load activities</h2>

	<form action="/activities/" method="post">

    {% csrf_token %}

			<label> {{ garmin_form.start_date.label_tag }}</label>
			{% render_field garmin_form.start_date %}

		<label> {{ garmin_form.garmin_username.label_tag }}</label>
		{% render_field garmin_form.garmin_username   %}
		
		<label> {{  garmin_form.garmin_password.label_tag }}</label>
		{% render_field garmin_form.garmin_password %}

		<button type='submit' class='btn'>Submit</button>

	</form>

	<h2>Your activities</h2>
	{% for garmin_row in garmin_data %}

		{% if garmin_row.user.username == user.username %}
		<ul>
			<li>
				<span class='garmin-id'> id : {{  garmin_row.id }}  </span> {{ garmin_row.date}} : {{ garmin_row.user.username}} -  {{ garmin_row.steps }} steps -  weight : {{ garmin_row.weight_kg }} (kg) 	
				<a class='badge badge-secondary edit-button' style='cursor: pointer;' data-id="{{ garmin_row.id }}" href='edit_activity/{{ garmin_row.id}}'>Edit</a>
				<a class='badge badge-danger delete-button' style='cursor: pointer;' data-id="{{ garmin_row.id }}" href='delete_activity/{{ garmin_row.id}}'>X</a>
				</li>
		</ul>
		{% endif %}

	{% endfor %}


{% else %}
  <p>You are not logged in</p>
  <a href="{% url 'login' %}">Log In</a> |
  <a href="{% url 'signup' %}">Sign Up</a>
{% endif %}

{% endblock %}


{% block javascript %}

{% load static %}

<script src= {% static  'scripts/activities.js'  %}></script>

{%  endblock %}



